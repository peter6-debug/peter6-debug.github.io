<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>诈尸杀 - 校园版</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- 模式选择页 -->
        <div id="modePage" class="page active">
            <h1>诈尸杀 · 校园版</h1>
            <div class="mode-buttons">
                <button id="practiceBtn">个人练习模式</button>
                <div class="online-group">
                    <button id="createRoomBtn">创建联机房间</button>
                    <div class="join-room">
                        <input type="text" id="roomIdInput" placeholder="输入房间号">
                        <button id="joinRoomBtn">加入房间</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 武将选择页 -->
        <div id="heroSelectPage" class="page">
            <h2>选择你的武将（5选1，不可重复）</h2>
            <div id="heroList" class="hero-grid"></div>
        </div>

        <!-- 游戏主页面 -->
        <div id="gamePage" class="page">
            <!-- 玩家信息区 -->
            <div class="player-info">
                <div class="self-player">
                    <h3>自己：<span id="selfHeroName">-</span></h3>
                    <p>学习币：<span id="selfHp">0</span>/<span id="selfMaxHp">0</span></p>
                    <p>手牌数：<span id="selfCardCount">0</span></p>
                </div>
                <div id="enemyPlayers" class="enemy-players"></div>
            </div>

            <!-- 手牌区 -->
            <div class="hand-cards">
                <h4>你的手牌：</h4>
                <div id="handCardsList" class="cards-grid"></div>
            </div>

            <!-- 操作区 -->
            <div class="action-area">
                <button id="drawCardBtn">摸牌</button>
                <button id="endTurnBtn">结束回合</button>
                <select id="targetPlayerSelect">
                    <option value="">选择目标玩家</option>
                </select>
            </div>

            <!-- 日志区 -->
            <div class="log-area">
                <h4>游戏日志：</h4>
                <div id="gameLog" class="log-content"></div>
            </div>
        </div>
    </div>

    <!-- 按依赖顺序引入JS -->
    <script src="js/data/cards.js"></script>
    <script src="js/data/heroes.js"></script>
    <script src="js/utils/dom.js"></script>
    <script src="js/utils/storage.js"></script>
    <script src="js/core/Random.js"></script>
    <script src="js/core/Player.js"></script>
    <script src="js/core/Room.js"></script>
    <script src="js/core/Game.js"></script>
    <script src="js/mode/Practice.js"></script>
    <script src="js/mode/Online.js"></script>

    <!-- 入口逻辑 -->
    <script>
        // 模式选择按钮绑定
        document.getElementById('practiceBtn').addEventListener('click', () => {
            PracticeMode.init();
        });

        document.getElementById('createRoomBtn').addEventListener('click', () => {
            const roomId = Room.createRoom();
            alert(`房间创建成功！房间号：${roomId}`);
            OnlineMode.init(roomId, true);
        });

        document.getElementById('joinRoomBtn').addEventListener('click', () => {
            const roomId = document.getElementById('roomIdInput').value.trim();
            if (!roomId) {
                alert('请输入房间号！');
                return;
            }
            if (Room.checkRoomExists(roomId)) {
                OnlineMode.init(roomId, false);
            } else {
                alert('房间不存在！');
            }
        });
    </script>
</body>
</html>
